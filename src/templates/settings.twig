{# {% extends "_layouts/cp" %} #}
{% import "_includes/forms" as forms %}

{% set title = "Matrix Horizontal Columns Settings"|t('matrix-horizontal-columns') %}

{% block content %}
    <form method="post" accept-charset="UTF-8" data-saveshortcut>
        {{ csrfInput() }}
        {{ actionInput('matrix-horizontal-columns/settings/save') }}
        {{ redirectInput('settings/matrix-horizontal-columns') }}

        {{ forms.lightswitchField({
            label: "Enable Matrix Horizontal Columns"|t('matrix-horizontal-columns'),
            instructions: "Enable or disable the horizontal columns functionality"|t('matrix-horizontal-columns'),
            id: 'enabled',
            name: 'enabled',
            on: settings.enabled,
            errors: settings.getErrors('enabled'),
        }) }}

        <hr>

        <h2>{{ "Block Type Settings"|t('matrix-horizontal-columns') }}</h2>

        {{ forms.editableTableField({
            label: "Column Block Types"|t('matrix-horizontal-columns'),
            instructions: "Matrix block types that should be treated as columns. One per row."|t('matrix-horizontal-columns'),
            id: 'columnBlockTypes',
            name: 'columnBlockTypes',
            cols: [
                {
                    type: 'singleline',
                    heading: 'Block Type Handle'|t('matrix-horizontal-columns'),
                    placeholder: 'cbColumn'
                }
            ],
            rows: settings.columnBlockTypes|map(type => [type]),
            addRowLabel: "Add block type"|t('matrix-horizontal-columns'),
            errors: settings.getErrors('columnBlockTypes'),
        }) }}

        {{ forms.editableTableField({
            label: "Row Block Types"|t('matrix-horizontal-columns'),
            instructions: "Matrix block types that should be treated as rows. One per row."|t('matrix-horizontal-columns'),
            id: 'rowBlockTypes',
            name: 'rowBlockTypes',
            cols: [
                {
                    type: 'singleline',
                    heading: 'Block Type Handle'|t('matrix-horizontal-columns'),
                    placeholder: 'cbRow'
                }
            ],
            rows: settings.rowBlockTypes|map(type => [type]),
            addRowLabel: "Add block type"|t('matrix-horizontal-columns'),
            errors: settings.getErrors('rowBlockTypes'),
        }) }}

        {{ forms.editableTableField({
            label: "Additional CSS Selectors"|t('matrix-horizontal-columns'),
            instructions: "Additional CSS selectors where horizontal columns should be enabled. One per row."|t('matrix-horizontal-columns'),
            id: 'customSelectors',
            name: 'customSelectors',
            cols: [
                {
                    type: 'singleline',
                    heading: 'Selector'|t('matrix-horizontal-columns'),
                    placeholder: '[data-attribute="customColumn"]'
                }
            ],
            rows: settings.customSelectors|map(selector => [selector]),
            addRowLabel: "Add selector"|t('matrix-horizontal-columns'),
            errors: settings.getErrors('customSelectors'),
        }) }}

        <hr>

        <h2>{{ "Visual Settings"|t('matrix-horizontal-columns') }}</h2>

        {{ forms.textField({
            label: "Minimum Column Width"|t('matrix-horizontal-columns'),
            instructions: "Minimum width for Matrix columns (pixels)"|t('matrix-horizontal-columns'),
            id: 'minBlockWidth',
            name: 'minBlockWidth',
            value: settings.minBlockWidth,
            type: 'number',
            errors: settings.getErrors('minBlockWidth'),
        }) }}

        {{ forms.textField({
            label: "Maximum Column Width"|t('matrix-horizontal-columns'),
            instructions: "Maximum width for Matrix columns (pixels)"|t('matrix-horizontal-columns'),
            id: 'maxBlockWidth',
            name: 'maxBlockWidth',
            value: settings.maxBlockWidth,
            type: 'number',
            errors: settings.getErrors('maxBlockWidth'),
        }) }}

        {{ forms.textField({
            label: "Scroll Speed"|t('matrix-horizontal-columns'),
            instructions: "Speed of auto-scrolling when dragging near edges"|t('matrix-horizontal-columns'),
            id: 'scrollSpeed',
            name: 'scrollSpeed',
            value: settings.scrollSpeed,
            type: 'number',
            errors: settings.getErrors('scrollSpeed'),
        }) }}

        {{ forms.textField({
            label: "Scroll Threshold"|t('matrix-horizontal-columns'),
            instructions: "Distance from edge to trigger auto-scroll (pixels)"|t('matrix-horizontal-columns'),
            id: 'scrollThreshold',
            name: 'scrollThreshold',
            value: settings.scrollThreshold,
            type: 'number',
            errors: settings.getErrors('scrollThreshold'),
        }) }}

        {{ forms.textField({
            label: "Magnet Strength"|t('matrix-horizontal-columns'),
            instructions: "Strength of magnetic snapping effect"|t('matrix-horizontal-columns'),
            id: 'magnetStrength',
            name: 'magnetStrength',
            value: settings.magnetStrength,
            type: 'number',
            errors: settings.getErrors('magnetStrength'),
        }) }}

        {{ forms.textField({
            label: "Drag Opacity"|t('matrix-horizontal-columns'),
            instructions: "Opacity of dragged columns (0-1)"|t('matrix-horizontal-columns'),
            id: 'dragOpacity',
            name: 'dragOpacity',
            value: settings.dragOpacity,
            type: 'number',
            step: '0.1',
            errors: settings.getErrors('dragOpacity'),
        }) }}

        {{ forms.textField({
            label: "Drag Scale"|t('matrix-horizontal-columns'),
            instructions: "Scale factor for dragged columns"|t('matrix-horizontal-columns'),
            id: 'dragScale',
            name: 'dragScale',
            value: settings.dragScale,
            type: 'number',
            step: '0.05',
            errors: settings.getErrors('dragScale'),
        }) }}

        {{ forms.lightswitchField({
            label: "Show Scroll Indicators"|t('matrix-horizontal-columns'),
            instructions: "Show visual indicators when scrolling horizontally"|t('matrix-horizontal-columns'),
            id: 'showScrollIndicators',
            name: 'showScrollIndicators',
            on: settings.showScrollIndicators,
            errors: settings.getErrors('showScrollIndicators'),
        }) }}

        <hr>

        <div class="buttons">
            <button type="submit" class="btn submit">{{ "Save"|t('matrix-horizontal-columns') }}</button>
        </div>
    </form>
{% endblock %} 